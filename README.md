# Getting started instructions

This project demostrate how to use serenity REST screenplay pattern
to test API endpoint
```
Deploy the webapp.war file to the tomcat server
Download tomcat web server
https://tomcat.apache.org/download-90.cgi
Click and down tar.gz (pgp, sha512)
untar and copy to a folder
Example: /Users/laymui/dev/apache-tomcat-9.0.37
cp webapp.war to /Users/laymui/dev/apache-tomcat-9.0.37/webapps
/Users/laymui/dev/apache-tomcat-9.0.37/bin
Start tomcat 
./startup.sh
This will start the tomcat server running at
http://localhost:8080/webapp/
```
### Dependencies   
```
Java 11    
Maven 3.6.X or above 
```
### Add Serenity dependencies to the pom.xml
```
https://mvnrepository.com/artifact/net.serenity-bdd/serenity-core
https://mvnrepository.com/artifact/net.serenity-bdd/serenity-junit
https://mvnrepository.com/artifact/net.serenity-bdd/serenity-screenplay
https://mvnrepository.com/artifact/net.serenity-bdd/serenity-rest-assured

```
Instructions to run test  
```
When you want to run specific test scenarios, 
add the specific tag @test (for example) to the feature file  
```
### serenity.sh script
The serenity.sh script is created to simplify the test execution:      
Pre-requisite: Assume you have docker engine installed in your local machine   
Run ./serenity.sh with arguments 

./serenity.sh 
./serenity.sh [sync|update_features|run_tests|push_results] [local|dev|staging|prod]

The 1st argument is the task options: sync, update_features, run_tests or push_results   
sync: To synchronise Scenarios to Test Runs in Cucumber Studio     
update_features: To update the feature file from Cucumber Studio      
run_tests: To run the tests    
push_results: To push the test results back to Cucumber Studio     
The 2nd argument is the env for the test to run in,    
Options include qa, dev, staging, prod.    

The test results will be recorded in the `target/site/serenity` directory.    
$ open index.html in a browser to see the nice reporting generated by Serenity

Produce the emailable summary report when we run the aggregate goal
```
mvn serenity:reports -Dserenity.reports=single-page-html
```

To view the report
```
cd target/site/serenity
open index.html
```
